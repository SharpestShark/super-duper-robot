<html>
  <head>
    <title>V4 Rotate to face object</title>
  </head>
  <body>
    <button onclick="reset()">reset</button>
    <canvas id="myCanvas" width="600" height="600" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>

<script>
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");
var player = new circ(200,200,20);
ctx.beginPath();
ctx.moveTo(0,0);
ctx.lineTo(200,200);
ctx.moveTo(0,0);
ctx.arc(0,0,30,0,Math.atan(player.y/player.x));
ctx.stroke();
function circ(x,y,r) {
  this.x = x;
  this.y = y;
  this.r = r;
  ctx.beginPath();
  ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);
  ctx.stroke();
}
function rect(x,y,width,height) {
  this.x = x;
  this.y = y;
  this.width = width;
  this.height = height;
  ctx.fillRect(this.x, this.y, this.width, this.height);
}
var yGap = 50;
var rectangX = 0;
var rectangWidth = 150;
var xMid = (rectangX + rectangWidth)/2;
var angle = Math.atan(player.y/player.x);
ctx.translate((player.x+yGap)*Math.tan(Math.atan(yGap/xMid)),(player.y+yGap)*Math.tan(Math.atan(yGap/xMid)));
ctx.rotate(angle);
// --------------------^ 2*(Math.pow(player.r,2)/player.y)~);
ctx.fillStyle = "rgba(0,0,0,.5)";
ctx.beginPath();
ctx.arc(75,175,75,0,2*Math.PI);
ctx.arc(0,0,15,0,2*Math.PI);
ctx.moveTo(0,0);
ctx.lineTo(600,0);
ctx.moveTo(0,0);
ctx.lineTo(0,600);
ctx.stroke();
ctx.fillRect(rectangX,yGap,rectangWidth,150);
  function reset() {
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    ctx.resetTransform();
    ctx.clearRect(0,0,600,600);
  }
</script>
  </body>
</html>
